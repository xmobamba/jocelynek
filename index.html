<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOCELYNE K POS SYSTEM</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/print.css" media="print">
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23FFA500'/%3E%3Ctext x='32' y='38' font-size='28' text-anchor='middle' fill='white' font-family='Inter, Arial, sans-serif'%3EJK%3C/text%3E%3C/svg%3E">
</head>
<body class="light-theme">
    <div id="loader">
        <div class="spinner"></div>
        <p>Chargement du système POS...</p>
    </div>
    <div class="app hidden" id="app">
        <aside class="sidebar">
            <div class="brand">
                <div class="brand-logo" aria-hidden="true">JK</div>
                <h1>JOCELYNE K</h1>
                <span>POS SYSTEM</span>
            </div>
            <nav>
                <button class="nav-link active" data-section="dashboard">Dashboard</button>
                <button class="nav-link" data-section="inventory">Inventaire</button>
                <button class="nav-link" data-section="sales">Ventes</button>
                <button class="nav-link" data-section="suppliers">Fournisseurs</button>
                <button class="nav-link" data-section="clients">Clients</button>
                <button class="nav-link" data-section="finances">Finances</button>
                <button class="nav-link" data-section="settings">Paramètres</button>
            </nav>
            <footer>
                <small id="offline-status">Statut : <span>Hors ligne</span></small>
                <small id="last-backup">Dernière sauvegarde : jamais</small>
            </footer>
        </aside>
        <main>
            <header class="topbar">
                <div class="store-info">
                    <h2 id="store-name">Boutique Jocelyne</h2>
                    <p id="store-subtitle">Votre caisse intelligente hors ligne</p>
                </div>
                <div class="topbar-actions">
                    <button id="toggle-theme" class="secondary">Mode sombre</button>
                    <button id="backup-btn">Sauvegarder</button>
                </div>
            </header>
            <section id="dashboard" class="section active">
                <div class="cards-grid">
                    <article class="card">
                        <h3>Ventes du jour</h3>
                        <p class="metric" id="daily-sales">0 FCFA</p>
                        <small id="daily-sales-count">0 ventes</small>
                    </article>
                    <article class="card">
                        <h3>Bénéfices nets</h3>
                        <p class="metric" id="net-profit">0 FCFA</p>
                        <small>Mois en cours</small>
                    </article>
                    <article class="card warning" id="low-stock-card">
                        <h3>Produits en rupture</h3>
                        <p class="metric" id="low-stock-count">0</p>
                        <small>Surveiller les stocks</small>
                    </article>
                </div>
                <div class="dashboard-layout">
                    <div class="chart-card">
                        <header>
                            <h3>Évolution des ventes (7 jours)</h3>
                            <button class="secondary" id="refresh-chart">Actualiser</button>
                        </header>
                        <canvas id="sales-chart" width="400" height="220"></canvas>
                    </div>
                    <div class="activity-card">
                        <header>
                            <h3>Activité récente</h3>
                        </header>
                        <ul id="activity-feed">
                            <li>Aucune activité pour le moment.</li>
                        </ul>
                    </div>
                </div>
            </section>
            <section id="inventory" class="section">
                <header class="section-header">
                    <div>
                        <h2>Inventaire</h2>
                        <p>Suivez vos produits, stock et fournisseurs.</p>
                    </div>
                    <div class="section-actions">
                        <button id="add-product-btn">Ajouter un produit</button>
                        <button id="print-labels">Imprimer étiquettes</button>
                        <label class="file-input">
                            Importer CSV
                            <input type="file" id="import-csv" accept=".csv">
                        </label>
                        <label class="file-input">
                            Importer JSON
                            <input type="file" id="import-json" accept=".json">
                        </label>
                        <button class="secondary" id="export-csv">Exporter CSV</button>
                        <button class="secondary" id="export-json">Exporter JSON</button>
                    </div>
                </header>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Réf.</th>
                                <th>Nom</th>
                                <th>Catégorie</th>
                                <th>Prix</th>
                                <th>Stock</th>
                                <th>Fournisseur</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-table"></tbody>
                    </table>
                </div>
            </section>
            <section id="sales" class="section">
                <header class="section-header">
                    <div>
                        <h2>Ventes</h2>
                        <p>Encaissez rapidement vos clients et ajustez le prix unitaire selon chaque commande.</p>
                    </div>
                    <div class="section-actions">
                        <input type="search" id="sales-search" placeholder="Rechercher un produit...">
                        <select id="sales-seller">
                            <option value="Default">Sélectionner vendeur</option>
                        </select>
                        <select id="payment-method">
                            <option value="cash">Espèces</option>
                            <option value="mobile">Mobile Money</option>
                            <option value="credit">Crédit</option>
                        </select>
                    </div>
                </header>
                <div class="sales-layout">
                    <div class="product-list">
                        <h3>Produits</h3>
                        <ul id="sales-products"></ul>
                    </div>
                    <div class="cart">
                        <h3>Panier</h3>
                        <div id="cart-items"></div>
                        <div class="cart-summary">
                            <p>Total: <span id="cart-total">0 FCFA</span></p>
                            <label>
                                Client:
                                <select id="cart-client"></select>
                            </label>
                            <button id="checkout-btn">Encaisser</button>
                            <button class="secondary" id="print-receipt">Imprimer le reçu</button>
                        </div>
                        <div class="sales-history">
                            <h4>Historique des ventes</h4>
                            <ul id="sales-history"></ul>
                        </div>
                    </div>
                </div>
            </section>
            <section id="suppliers" class="section">
                <header class="section-header">
                    <div>
                        <h2>Fournisseurs</h2>
                        <p>Gérez vos relations fournisseurs et historiques.</p>
                    </div>
                    <button id="add-supplier-btn">Ajouter un fournisseur</button>
                </header>
                <div class="cards-grid" id="suppliers-list"></div>
            </section>
            <section id="clients" class="section">
                <header class="section-header">
                    <div>
                        <h2>Clients</h2>
                        <p>Suivez les crédits et achats des clients.</p>
                    </div>
                    <button id="add-client-btn">Ajouter un client</button>
                </header>
                <div class="cards-grid" id="clients-list"></div>
            </section>
            <section id="finances" class="section">
                <header class="section-header">
                    <div>
                        <h2>Finances</h2>
                        <p>Analysez les dépenses et revenus.</p>
                    </div>
                    <div class="section-actions">
                        <button id="add-expense-btn">Ajouter dépense</button>
                        <button id="add-income-btn">Ajouter recette</button>
                        <button class="secondary" id="export-finance-csv">Exporter CSV</button>
                    </div>
                </header>
                <div class="finances-summary">
                    <article>
                        <h3>Dépenses du mois</h3>
                        <p id="monthly-expenses">0 FCFA</p>
                    </article>
                    <article>
                        <h3>Recettes du mois</h3>
                        <p id="monthly-income">0 FCFA</p>
                    </article>
                    <article>
                        <h3>Bénéfice net</h3>
                        <p id="monthly-profit">0 FCFA</p>
                    </article>
                </div>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>Date</th>
                                <th>Type</th>
                                <th>Montant</th>
                                <th>Catégorie</th>
                                <th>Notes</th>
                            </tr>
                        </thead>
                        <tbody id="finances-table"></tbody>
                    </table>
                </div>
            </section>
            <section id="settings" class="section">
                <header class="section-header">
                    <div>
                        <h2>Paramètres</h2>
                        <p>Personnalisez votre application POS hors ligne.</p>
                    </div>
                </header>
                <div class="settings-grid">
                    <form id="store-settings" class="card form-card">
                        <h3>Identité de la boutique</h3>
                        <label>Nom de la boutique
                            <input type="text" id="setting-store-name" required>
                        </label>
                        <label>Devise
                            <input type="text" id="setting-currency" value="FCFA">
                        </label>
                        <label>TVA (%)
                            <input type="number" id="setting-tax" min="0" value="0">
                        </label>
                        <label>Logo
                            <input type="file" id="setting-logo" accept="image/*">
                        </label>
                        <button type="submit">Enregistrer</button>
                    </form>
                    <div class="card form-card">
                        <h3>Base de données locale</h3>
                        <button id="download-backup">Exporter la base JSON</button>
                        <label class="file-input">
                            Importer une base JSON
                            <input type="file" id="upload-backup" accept=".json">
                        </label>
                        <button class="danger" id="reset-data">Réinitialiser les données</button>
                    </div>
                </div>
            </section>
        </main>
        <div id="ai-assistant" class="ai-widget">
            <button id="ai-toggle" class="ai-toggle">🤖</button>
            <div class="ai-panel hidden">
                <header>
                    <h3>Assistant IA</h3>
                    <button id="ai-close">×</button>
                </header>
                <div class="ai-messages" id="ai-messages"></div>
                <form id="ai-form">
                    <input type="text" id="ai-input" placeholder="Posez votre question..." required>
                    <button type="submit">Envoyer</button>
                </form>
            </div>
        </div>
    </div>

    <dialog id="modal" class="modal">
        <form method="dialog" class="modal-content" id="modal-form"></form>
    </dialog>

    <script src="js/app.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/sales.js"></script>
    <script src="js/suppliers.js"></script>
    <script src="js/clients.js"></script>
    <script src="js/finances.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/ai.js"></script>
</body>
</html>
