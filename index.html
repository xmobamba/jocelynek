<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JOCELYNE K POS SYSTEM</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/print.css" media="print">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 64 64'%3E%3Crect width='64' height='64' rx='12' fill='%23FFA500'/%3E%3Ctext x='32' y='38' font-size='28' text-anchor='middle' fill='white' font-family='Inter,Arial,sans-serif'%3EJK%3C/text%3E%3C/svg%3E">
</head>
<body>
    <div id="loader" aria-live="polite" aria-label="Chargement">
        <div class="loader-card">
            <div class="loader-logo">JK</div>
            <p>D√©marrage de la caisse...</p>
            <div class="loader-bar"><span></span></div>
        </div>
    </div>
    <div class="app" id="app" hidden>
        <aside class="sidebar">
            <div class="brand" id="brand-badge">
                <div class="brand-logo" id="brand-logo" aria-hidden="true">JK</div>
                <div class="brand-text">
                    <h1>JOCELYNE K</h1>
                    <span>POS SYSTEM</span>
                </div>
            </div>
            <nav class="menu" aria-label="Sections">
                <button class="menu-item active" data-section="dashboard">Dashboard</button>
                <button class="menu-item" data-section="inventory">Inventaire</button>
                <button class="menu-item" data-section="sales">Ventes</button>
                <button class="menu-item" data-section="sellers">Vendeuses</button>
                <button class="menu-item" data-section="finances">Finances</button>
                <button class="menu-item" data-section="settings">Param√®tres</button>
            </nav>
            <footer class="sidebar-footer">
                <span id="connection-badge">Hors ligne</span>
                <small id="backup-indicator">Derni√®re sauvegarde : jamais</small>
            </footer>
        </aside>
        <main class="workspace" id="workspace">
            <header class="topbar">
                <div>
                    <h2 id="store-name">Boutique Jocelyne</h2>
                    <p id="store-tagline">Caisse intelligente hors ligne</p>
                </div>
                <div class="topbar-actions">
                    <span class="chip" id="topbar-status">Hors ligne</span>
                    <button id="toggle-theme" class="secondary">Mode sombre</button>
                    <button id="trigger-backup">Sauvegarder</button>
                </div>
            </header>

            <section id="dashboard" class="section active" aria-labelledby="dashboard-title">
                <div class="metrics-grid">
                    <article class="metric-card accent-sales">
                        <header>
                            <span aria-hidden="true">üí∞</span>
                            <div>
                                <h3 id="dashboard-title">Ventes du jour</h3>
                                <p>Montant total encaiss√©</p>
                            </div>
                        </header>
                        <p class="metric-value" id="metric-sales">0 FCFA</p>
                        <small id="metric-sales-count">0 ventes</small>
                    </article>
                    <article class="metric-card accent-stock">
                        <header>
                            <span aria-hidden="true">üì¶</span>
                            <div>
                                <h3>Stock boutique</h3>
                                <p>Disponibilit√©s hors consignation</p>
                            </div>
                        </header>
                        <p class="metric-value" id="metric-stock">0 produits</p>
                        <small id="metric-low-stock">0 alertes</small>
                    </article>
                    <article class="metric-card accent-profit">
                        <header>
                            <span aria-hidden="true">üìà</span>
                            <div>
                                <h3>B√©n√©fice net</h3>
                                <p>Mois en cours</p>
                            </div>
                        </header>
                        <p class="metric-value" id="metric-profit">0 FCFA</p>
                        <small id="metric-expense">0 d√©penses</small>
                    </article>
                </div>
                <div class="dashboard-layout">
                    <article class="card insights-card">
                        <header>
                            <div>
                                <h3>R√©sum√© intelligent</h3>
                                <p>Analyse automatique des modules</p>
                            </div>
                            <button class="secondary" id="refresh-insights">Actualiser</button>
                        </header>
                        <p id="insights-intro">Analyse des donn√©es en cours...</p>
                        <ul id="insights-list">
                            <li class="empty">Les informations s'afficheront ici.</li>
                        </ul>
                    </article>
                    <article class="card chart-card">
                        <header>
                            <h3>Ventes des 7 derniers jours</h3>
                            <button class="secondary" id="refresh-chart">Actualiser</button>
                        </header>
                        <canvas id="sales-chart" width="600" height="280" role="img" aria-label="Historique des ventes"></canvas>
                    </article>
                    <article class="card activity-card">
                        <header>
                            <h3>Activit√© r√©cente</h3>
                        </header>
                        <ul id="activity-feed">
                            <li class="empty">
                                <span aria-hidden="true">üïí</span>
                                <div>
                                    <strong>Aucune activit√©</strong>
                                    <p>Les actions appara√Ætront ici.</p>
                                </div>
                            </li>
                        </ul>
                    </article>
                </div>
            </section>

            <section id="inventory" class="section" aria-labelledby="inventory-title">
                <header class="section-header">
                    <div>
                        <h2 id="inventory-title">Inventaire</h2>
                        <p>G√©rez les produits et surveillez les stocks.</p>
                    </div>
                    <div class="section-actions">
                        <button id="add-product">Ajouter un produit</button>
                        <button class="secondary" id="print-labels">Imprimer √©tiquettes</button>
                        <label class="file-input">
                            Importer CSV
                            <input type="file" id="import-csv" accept=".csv">
                        </label>
                        <label class="file-input">
                            Importer JSON
                            <input type="file" id="import-json" accept="application/json">
                        </label>
                        <button class="secondary" id="export-csv">Exporter CSV</button>
                    </div>
                </header>
                <div class="table-wrapper">
                    <table>
                        <thead>
                            <tr>
                                <th>R√©f√©rence</th>
                                <th>Nom</th>
                                <th>Cat√©gorie</th>
                                <th>Prix</th>
                                <th>Stock boutique</th>
                                <th>Confi√©</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="inventory-body">
                            <tr class="empty">
                                <td colspan="7">Aucun produit enregistr√©.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section id="sales" class="section" aria-labelledby="sales-title">
                <header class="section-header">
                    <div>
                        <h2 id="sales-title">Ventes</h2>
                        <p>Encaissez rapidement et ajustez les prix au besoin.</p>
                    </div>
                    <div class="section-actions">
                        <label>Vendeuse
                            <select id="sale-seller"></select>
                        </label>
                        <label>Date de vente
                            <input type="date" id="sale-date">
                        </label>
                        <label>Paiement
                            <select id="sale-payment">
                                <option value="cash">Esp√®ces</option>
                                <option value="mobile">Mobile money</option>
                                <option value="credit">Cr√©dit</option>
                            </select>
                        </label>
                        <button id="reset-sale" class="secondary">R√©initialiser</button>
                    </div>
                </header>
                <div class="sales-layout">
                    <div class="catalog">
                        <div class="catalog-header">
                            <input type="search" id="search-product" placeholder="Rechercher un produit">
                            <button id="toggle-manual-price" class="secondary">Prix manuel : oui</button>
                        </div>
                        <ul id="product-list" class="product-list">
                            <li class="empty">Ajoutez des produits pour d√©marrer.</li>
                        </ul>
                    </div>
                    <div class="cart" id="sale-cart">
                        <header>
                            <h3>Panier</h3>
                            <span id="cart-total">0 FCFA</span>
                        </header>
                        <ul id="cart-items">
                            <li class="empty">Aucun article.</li>
                        </ul>
                        <div class="cart-actions">
                            <button id="complete-sale">Valider la vente</button>
                            <button class="secondary" id="print-receipt">Imprimer le re√ßu</button>
                        </div>
                        <div class="history">
                            <h4>Historique des ventes</h4>
                            <ul id="sales-history">
                                <li class="empty">Aucune vente enregistr√©e.</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>

            <section id="sellers" class="section" aria-labelledby="sellers-title">
                <header class="section-header">
                    <div>
                        <h2 id="sellers-title">Vendeuses</h2>
                        <p>Suivez la marchandise confi√©e et les r√®glements.</p>
                    </div>
                    <div class="section-actions">
                        <button id="add-seller">Ajouter une vendeuse</button>
                    </div>
                </header>
                <div id="seller-list" class="card-list empty">
                    <p>Aucune vendeuse enregistr√©e.</p>
                </div>
            </section>

            <section id="finances" class="section" aria-labelledby="finances-title">
                <header class="section-header">
                    <div>
                        <h2 id="finances-title">Finances</h2>
                        <p>Suivez recettes, d√©penses et b√©n√©fices.</p>
                    </div>
                    <div class="section-actions">
                        <button id="add-income">Ajouter une recette</button>
                        <button id="add-expense" class="secondary">Ajouter une d√©pense</button>
                        <button id="export-finances" class="secondary">Exporter CSV</button>
                    </div>
                </header>
                <div class="finances-grid">
                    <article class="card">
                        <h3>R√©sum√©</h3>
                        <ul class="finance-summary" id="finance-summary">
                            <li>Total recettes : 0 FCFA</li>
                            <li>Total d√©penses : 0 FCFA</li>
                            <li>B√©n√©fice net : 0 FCFA</li>
                        </ul>
                    </article>
                    <article class="card">
                        <h3>Mouvements financiers</h3>
                        <ul id="finance-history">
                            <li class="empty">Aucun mouvement enregistr√©.</li>
                        </ul>
                    </article>
                </div>
            </section>

            <section id="settings" class="section" aria-labelledby="settings-title">
                <header class="section-header">
                    <div>
                        <h2 id="settings-title">Param√®tres</h2>
                        <p>Personnalisez votre syst√®me POS.</p>
                    </div>
                </header>
                <form id="settings-form" class="settings-form">
                    <div class="form-group">
                        <label for="setting-name">Nom de la boutique</label>
                        <input type="text" id="setting-name" required>
                    </div>
                    <div class="form-group">
                        <label for="setting-tagline">Slogan</label>
                        <input type="text" id="setting-tagline">
                    </div>
                    <div class="form-group">
                        <label for="setting-currency">Devise</label>
                        <input type="text" id="setting-currency" maxlength="6" placeholder="FCFA">
                    </div>
                    <div class="form-group">
                        <label for="setting-vat">TVA (%)</label>
                        <input type="number" id="setting-vat" min="0" max="100" step="0.1">
                    </div>
                    <div class="form-group">
                        <label for="setting-threshold">Seuil alerte stock</label>
                        <input type="number" id="setting-threshold" min="0" step="1">
                    </div>
                    <div class="form-group">
                        <label class="switch">
                            <input type="checkbox" id="setting-manual-price">
                            <span>Demander le prix √† chaque vente</span>
                        </label>
                    </div>
                    <div class="form-actions">
                        <button type="submit">Enregistrer</button>
                        <button type="button" class="secondary" id="reset-data">R√©initialiser les donn√©es</button>
                        <label class="file-input">
                            Restaurer JSON
                            <input type="file" id="restore-json" accept="application/json">
                        </label>
                    </div>
                </form>
            </section>
        </main>
    </div>

    <div id="modal" class="modal" hidden aria-hidden="true" role="dialog">
        <div class="modal-content" role="document">
            <header>
                <h3 id="modal-title">Titre</h3>
                <button id="close-modal" aria-label="Fermer">√ó</button>
            </header>
            <form id="modal-form"></form>
        </div>
    </div>

    <template id="label-template">
        <section class="print-labels">
            <h1>√âtiquettes produits</h1>
            <div id="label-grid"></div>
        </section>
    </template>

    <template id="receipt-template">
        <section class="print-receipt">
            <h1 id="receipt-store">Boutique</h1>
            <p id="receipt-date">Date</p>
            <table>
                <thead>
                    <tr>
                        <th>Article</th>
                        <th>Qt√©</th>
                        <th>Prix</th>
                        <th>Total</th>
                    </tr>
                </thead>
                <tbody id="receipt-items"></tbody>
            </table>
            <p id="receipt-total">Total : 0</p>
        </section>
    </template>

    <script src="js/app.js"></script>
    <script src="js/inventory.js"></script>
    <script src="js/sales.js"></script>
    <script src="js/sellers.js"></script>
    <script src="js/finances.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/insights.js"></script>
</body>
</html>
